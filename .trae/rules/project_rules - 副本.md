# AI协作开发规则与XAMPP环境规范

## 一、XAMPP环境基础配置
### 1.1 服务状态与访问
记住：PHP服务器我已经启动，禁止再次启动
- **已启动服务**：Apache（端口80）、MySQL（端口3306）
- **访问方式**：直接通过`http://localhost/`访问项目
- **禁止操作**：严禁启动其他端口服务（如8080、3000等）

### 1.2 数据库核心信息
- **连接配置**：使用PHP PDO连接
- **数据库名**：wallpaper_db
- **连接信息**：账号root，密码为空，主机localhost:3306
- **字符集**：`utf8mb4`字符集，存储引擎InnoDB
- **查询工具**：使用`F:\XAMPP\htdocs\scripts\sql_test`此目录下脚本，可以高效执行SQL查询和管理操作
- **管理员账号-用于调试**：582311520@qq.com丨密码：wodebz123

**管理工具**：
在使用过程中，要不断的完善和更新现有数据库管理功能，以便在下次使用时能够更高效的操作数据库。
- `/scripts/sql_test/db_quick_tools.php`：创建、验证、状态、优化、备份
- `/scripts/sql_test/db_connection_test.php`：连接测试、结构检查
- `/scripts/sql_test/db_manager.bat`：Windows批处理界面

**操作规范**：
- 使用事务处理多表操作
- 参数绑定防止SQL注入
- 重要操作前备份数据
- 记录详细操作日志

### 1.3 终端命令规范
- **路径导航**：
我的电脑是64位WIN10专业版系统，必须输入"F:"才能导航到F盘
  ```powershell
  f:
  cd F:\XAMPP\htdocs
  ```
- **Python脚本执行**：
  ```powershell
  python "F:\XAMPP\htdocs\mysql_test.py"
  ```
- **文件操作**：
  ```powershell
  # 查看文件内容
  Get-Content "F:\XAMPP\htdocs\config.php"
  ```
  **终端查看数据库正确示例**：
mysql -u root wallpaper_db -e DESCRIBE sessions; SELECT COUNT(*) as total_sessions FROM sessions;

### 1.4 项目导航索引
- **全局概览**：查看 `F:\XAMPP\htdocs\txt-md\项目索引.md`  
- **数据库结构**：查看 `F:\XAMPP\htdocs\txt-md\数据库导航.md`  
- **首页数据源**：查看 `F:\XAMPP\htdocs\txt-md\手动启动.md`  
- **首页功能分析**：查看 `F:\XAMPP\htdocs\txt-md\首页功能分析文档.md`  
任务完成后，需要清理临时创建的文件（如测试、检查、创建表等脚本），并及时更新“项目索引.md”或"数据库导航.md"文件。



## 二、核心协作原则（AI必守）

### 2.1 指令驱动执行机制
- **全自动操作**：代码修改、日志查询、服务状态检查等常规操作直接执行，无需手动干预
- **红线操作确认**：涉及删库、改核心配置（如httpd.conf、my.cnf）时必须弹窗确认
- **功能保护原则**：修改代码前自动检测依赖关系，可能影响其他功能时立即暂停并提示

### 2.2 任务执行标准
- **任务完成后回复标准**：问题修复后按"搞定了，实现功能1、2、3"简洁总结，不赘述排查过程
- **专注原则**：仅修改指定文件/功能，其他正常代码不得触碰
- **样式调整规范**：修改CSS后需明确告知修改文件路径、行号及参数变化

## 三、避坑与清理机制

### 3.1 敏感操作限制
- **数据库表结构修改**：添加/删除字段前必须弹窗确认
- **根目录文件操作**：删除根目录文件前必须获取明确指令

### 3.2 调试清理标准
- **测试脚本清理**：任务完成后自动删除`test/`目录下所有临时文件
- **代码清理**：移除调试用的`console.log`、临时注释及日志文件

### 3.3 问题重试机制
- **同一问题处理**：尝试3次未解决时，列出已尝试方案（如修改JS路径、清缓存等）
- **反馈格式**："已尝试3种方法未解决，是否更换思路？"

## 四、文件与目录管理规范

### 4.1 核心目录结构**：
- `/api/`: 后端PHP接口文件（独立功能可建子文件夹）
- `/static/`: 静态资源（css/js/images/uploads）
- `/test/`: 临时测试脚本
- `/scripts/`: 项目维护脚本，一次性使用、临时脚本不要写在这里
- `/scripts/sql_test/`: 可供长期使用、提升效率的SQL相关脚本
- `/txt-md/`: 项目文档
- `/logic/`: 模块逻辑文档
- **根目录**: 仅允许核心配置和入口文件

**文件命名规范**：
- 命名以简短可识别的英文单词或缩写，避免命名过长
- PHP接口: `[功能动词]_[名词].php`
- JavaScript: `[页面或模块名].js`
- 测试文件: `test_[功能描述].html`

### 4.2 常用目录结构规范
```
F:\XAMPP\htdocs\
├── logic\             # 模块逻辑文档存放（命名：中文命名-功能名称.md）
├── logs\              # 日志存放目录（命名：logs_功能_YYYYMMDD.txt）
├── test\              # 临时测试脚本存放（命名：test_功能_YYYYMMDD.php）
├── txt-md\            # 文档存放目录（含项目索引.md、数据库导航.md）
└── 项目文件按功能分类存放（禁止全部置于根目录）
```

### 4.3 logic模块逻辑文档管理规范

**文档体系**：
- 存放目录：`/logic/`
- 命名规范：`[中文命名-功能名称].md`
- 协作要求：任务前检查文档，缺失时自动创建，代码修改后同步更新

**文档标准模板**：
```markdown
# [中文命名-功能名称] 模块逻辑文档

## 1. 模块概述
- 功能描述、业务场景、模块边界

## 2. 技术架构
- 技术栈、数据流向、核心算法

## 3. 数据模型
- 数据库表结构（含查看语句）
- 数据字典、数据约束

## 4. 接口设计
- API接口清单、参数规范、响应格式、错误码

## 5. 业务流程
- 主流程图、异常处理、状态转换

## 6. 关键代码位置
- 核心文件清单、关键函数索引、配置文件位置

## 7. 依赖关系
- 上游依赖、下游影响、外部服务
```

**文档管理**：
- 主动更新项目索引文档
- 模块逻辑文档优先检查
- 文档与代码同步更新

**问题解决**：
- "事不过三"原则，3次试尝没有修复同一问题，请报告：是否换个思路？
- 日志记录关键变量和流程

**质量保证**：
- 模块影响评估
- 版本控制意识